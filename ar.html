<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Anchored AR Scene</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
      // Register a color change component
      AFRAME.registerComponent('color-change', {
        schema: {
          color: {type: 'color', default: '#EF2D5E'}
        },
        init: function () {
          const el = this.el;
          const originalColor = el.getAttribute('material').color;
          
          el.addEventListener('mouseenter', () => {
            el.setAttribute('material', 'color', this.data.color);
          });
          
          el.addEventListener('mouseleave', () => {
            el.setAttribute('material', 'color', originalColor);
          });
        }
      });

      // Register a floating animation component
      AFRAME.registerComponent('float', {
        schema: {
          speed: {type: 'number', default: 1},
          distance: {type: 'number', default: 0.5}
        },
        init: function () {
          this.startPosition = this.el.object3D.position.clone();
        },
        tick: function (time) {
          const position = this.startPosition.clone();
          position.y += Math.sin(time * 0.001 * this.data.speed) * this.data.distance;
          this.el.object3D.position.copy(position);
        }
      });
    </script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene 
      embedded 
      arjs="sourceType: webcam; debugUIEnabled: true; detectionMode: mono; trackingMethod: best;"
      renderer="logarithmicDepthBuffer: true;"
      vr-mode-ui="enabled: false">
      
      <!-- Camera with AR controls -->
      <a-camera gps-camera rotation-reader></a-camera>
      
      <!-- AR content anchored in 3D space -->
      <a-entity 
        position="0 1.5 -2" 
        rotation="0 0 0"
        ar-hit-test="target: #ar-content;"
        ar-hit-test-listener>
        
        <!-- Ground -->
        <a-plane 
          id="ar-content"
          position="0 0 0" 
          rotation="-90 0 0" 
          width="1" 
          height="1" 
          color="#7BC8A4"
          shadow>
        </a-plane>
        
        <!-- Floating cube with color change -->
        <a-box 
          position="-0.3 0.2 0" 
          width="0.2" 
          height="0.2" 
          depth="0.2" 
          color="#4CC3D9"
          float="speed: 1.5; distance: 0.05"
          color-change="color: #FFC65D"
          shadow>
        </a-box>
        
        <!-- Floating sphere with color change -->
        <a-sphere 
          position="0 0.3 0" 
          radius="0.15" 
          color="#EF2D5E"
          float="speed: 1.0; distance: 0.05"
          color-change="color: #4CC3D9"
          shadow>
        </a-sphere>
        
        <!-- Floating cylinder with color change -->
        <a-cylinder 
          position="0.3 0.2 0" 
          radius="0.1" 
          height="0.2" 
          color="#FFC65D"
          float="speed: 0.8; distance: 0.05"
          color-change="color: #EF2D5E"
          shadow>
        </a-cylinder>

        <!-- Lighting -->
        <a-entity light="type: ambient; color: #BBB"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="-0.5 1 1"></a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>